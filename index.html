<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mogrem Shop</title>
<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:Segoe UI,Tahoma;}
body{background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);color:#fff;min-height:100vh;display:flex;justify-content:center;align-items:flex-start;padding:10px;transition:all 0.4s;}
body.tablet .app{max-width:760px;}
.app{width:100%;max-width:380px;background:#000c;border-radius:22px;padding:16px;min-height:95vh;display:none;flex-direction:column;justify-content:flex-start;transition:all 0.4s ease;overflow:auto;}
.app.active{display:flex;opacity:1;transform:translateY(0);}
h1,h2,h3,h4{text-align:center;margin:10px 0;}
button{border:none;border-radius:12px;padding:10px;margin:4px 0;font-size:15px;background:linear-gradient(45deg,#1a73e8,#0f3f5f);color:#fff;cursor:pointer;transition:0.3s;}
button:hover{transform:scale(1.05);box-shadow:0 5px 15px rgba(0,0,0,.6);}
button.gray{background:#444;}
button.success{background:#00796b;}
button.danger{background:#c62828;}
input,select,textarea{width:100%;padding:10px;border-radius:12px;border:none;margin-bottom:8px;text-align:center;background:#0006;color:#fff;}
textarea{resize:none;height:60px;}
.topBtns{display:flex;gap:8px;justify-content:center;margin-bottom:20px;}
.bigBtns{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-top:10px;}
.centerText{text-align:center;margin:20px 0;line-height:1.8;}
.section{border:1px solid #555;padding:10px;margin:10px 0;border-radius:10px;}
.rowBtn{display:flex;gap:4px;justify-content:center;}
</style>
</head>
<body>

<!-- MAIN SCREEN -->
<div class="app active" id="main">
  <div class="topBtns">
    <button onclick="setNormal()">ğŸ“± Ø¹Ø§Ø¯ÙŠ</button>
    <button onclick="setTablet()">ğŸ“² ØªØ§Ø¨Ù„Øª</button>
  </div>
  <div class="centerText">
    <h1>MOGREM SHOP</h1>
    <p>Designer<br>Youssef Jo<br>ğŸ“ 01128915630</p>
    <p>Admin<br>Mogrem â€“ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø´Ø­Ù†<br>ğŸ“ 01153845611</p>
  </div>
  <div class="bigBtns">
    <button onclick="go('charge')">ğŸ’³ Ø§Ù„Ø´Ø­Ù†</button>
    <button onclick="goAdmin()">ğŸ› ï¸ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</button>
  </div>
</div>

<!-- CHARGE SCREEN -->
<div class="app" id="charge">
  <button class="back" onclick="go('main')">â¬… Ø±Ø¬ÙˆØ¹</button>
  <h2>Ø´Ø§Ø´Ø© Ø§Ù„Ø´Ø­Ù†</h2>
  <select id="ctype" onchange="updateChargeFields()">
    <option value="id">ID Ø§Ù„Ù„Ø§Ø¹Ø¨</option>
    <option value="account">Account</option>
  </select>
  <input id="cid" placeholder="ID Ø§Ù„Ù„Ø§Ø¹Ø¨">
  <input id="caccount" placeholder="Ø§Ù„Ø­Ø³Ø§Ø¨" style="display:none;">
  <input id="cpass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±" style="display:none;">
  <input id="ctypeAccount" placeholder="Ù†ÙˆØ¹ Ø§Ù„Ø­Ø³Ø§Ø¨" style="display:none;">
  <input id="cgame" placeholder="Ø§Ø³Ù… Ø§Ù„Ù„Ø¹Ø¨Ø©" readonly>
  <input id="ctable" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¬Ø¯ÙˆÙ„" readonly>
  <input id="cpack" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¨Ø§Ù‚Ø©" readonly>
  <input id="cprice" placeholder="Ø§Ù„Ø³Ø¹Ø±" readonly>
  <select id="cpay">
    <option value="">Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„Ø¯ÙØ¹</option>
    <option>ÙÙˆØ¯Ø§ÙÙˆÙ† ÙƒØ§Ø´</option>
    <option>Ø£Ù…Ø§Ù†</option>
    <option>Ù…Ø­ÙØ¸Ø©</option>
  </select>
  <textarea id="cnotes" placeholder="Ù…Ù„Ø§Ø­Ø¸Ø§Øª"></textarea>
  <label><input type="checkbox" id="cconfirm"> Ø£Ø¤ÙƒØ¯ Ø¥Ø±Ø³Ø§Ù„ ØµÙˆØ±Ø© Ø§Ù„Ø¥Ø«Ø¨Ø§Øª</label>
  <input type="file" id="cimg">
  <button class="success" onclick="sendOrder()">ğŸ“¤ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨</button>
  <button onclick="go('packages')">ğŸ“¦ Ø§Ø®ØªÙŠØ§Ø± Ø¨Ø§Ù‚Ø©</button>
  <div id="userGrids"></div>
</div>

<!-- PACKAGES SCREEN -->
<div class="app" id="packages">
  <button class="back" onclick="go('charge')">â¬… Ø±Ø¬ÙˆØ¹</button>
  <h2>Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ø¨Ø§Ù‚Ø§Øª</h2>
  <select id="pgame" onchange="loadTablesUser()"></select>
  <select id="ptable" onchange="renderUserGrids()"></select>
  <div id="packsView"></div>
</div>

<!-- ADMIN LOGIN -->
<div class="app" id="adminLogin">
  <h2>Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h2>
  <input type="password" id="apass" placeholder="ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø±">
  <button onclick="checkAdmin()">Ø¯Ø®ÙˆÙ„</button>
  <button class="back" onclick="go('main')">Ø±Ø¬ÙˆØ¹</button>
</div>

<!-- ADMIN PANEL -->
<div class="app" id="admin">
  <button class="back" onclick="go('main')">â¬… Ø±Ø¬ÙˆØ¹</button>
  <h2>Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</h2>
  <div class="bigBtns">
    <button onclick="showAdminSection('games')">ğŸ® ØªÙƒÙˆÙŠØ¯ Ø§Ù„Ø£Ù„Ø¹Ø§Ø¨</button>
    <button onclick="showAdminSection('tables')">ğŸ“‚ ØªÙƒÙˆÙŠØ¯ Ø§Ù„Ø¬Ø¯Ø§ÙˆÙ„</button>
    <button onclick="showAdminSection('packs')">ğŸ“¦ ØªÙƒÙˆÙŠØ¯ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª</button>
    <button onclick="showAdminSection('history')">ğŸ“œ Ø³Ø¬Ù„ Ø§Ù„Ø´Ø­Ù†Ø§Øª</button>
  </div>
  <div id="adminSection"></div>
</div>

<script>
const PASS="admin mogrem";
let db=JSON.parse(localStorage.getItem("db"))||{};
let history=JSON.parse(localStorage.getItem("history"))||[];

function go(id){
  document.querySelectorAll(".app").forEach(a=>a.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  if(id==='packages') populateGamesUser();
}
function setTablet(){document.body.classList.add("tablet")}
function setNormal(){document.body.classList.remove("tablet")}
function goAdmin(){go('adminLogin')}
function checkAdmin(){if(apass.value===PASS){apass.value="";go('admin');}else alert("ÙƒÙ„Ù…Ø© Ø§Ù„Ø³Ø± Ø®Ø·Ø£");}

function updateChargeFields(){
  let type=document.getElementById('ctype').value;
  document.getElementById('cid').style.display = type==='id'?'block':'none';
  document.getElementById('caccount').style.display = type==='account'?'block':'none';
  document.getElementById('cpass').style.display = type==='account'?'block':'none';
  document.getElementById('ctypeAccount').style.display = type==='account'?'block':'none';
}

function populateGamesUser(){
  let pg=document.getElementById('pgame'); pg.innerHTML=''; for(let g in db){let opt=document.createElement('option'); opt.value=g; opt.textContent=g; pg.appendChild(opt);} loadTablesUser();
}
function loadTablesUser(){
  let g=document.getElementById('pgame').value; let pt=document.getElementById('ptable'); pt.innerHTML=''; for(let t in db[g]){let opt=document.createElement('option'); opt.value=t; opt.textContent=t; pt.appendChild(opt);} renderUserGrids();
}
function renderUserGrids(){
  let g=document.getElementById('pgame').value; let t=document.getElementById('ptable').value; let view=document.getElementById('packsView'); view.innerHTML=''; if(!g||!t) return; db[g][t].forEach(p=>{let btn=document.createElement('button'); btn.textContent=`${p.name} - ${p.price}`; btn.onclick=()=>{document.getElementById('cgame').value=g; document.getElementById('ctable').value=t; document.getElementById('cpack').value=p.name; document.getElementById('cprice').value=p.price; go('charge');}; view.appendChild(btn);});
}

function sendOrder(){
  let type=document.getElementById('ctype').value;
  let idVal=document.getElementById('cid').value;
  let accountVal=document.getElementById('caccount').value;
  let passVal=document.getElementById('cpass').value;
  let typeAcc=document.getElementById('ctypeAccount').value;
  if(type==='id' && !idVal){alert('Ø£ÙƒÙ…Ù„ Ø¨ÙŠØ§Ù†Ø§Øª ID'); return;}
  if(type==='account' && (!accountVal || !passVal || !typeAcc)){alert('Ø£ÙƒÙ…Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø­Ø³Ø§Ø¨'); return;}
  if(!cconfirm.checked){alert('Ø£Ø¤ÙƒØ¯ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„ØµÙˆØ±Ø©'); return;}
  const phone="201153845611";
  let msg= type==='id'?`ID: ${idVal}`:`Account: ${accountVal} | Password: ${passVal} | Type: ${typeAcc}`;
  window.open(`https://wa.me/${phone}?text=${encodeURIComponent('Ø·Ù„Ø¨ Ø´Ø­Ù† Ø¬Ø¯ÙŠØ¯:\n'+msg)}`,"_blank");
  history.push({type,id:idVal,account:accountVal,pass:passVal,typeAcc});
  localStorage.setItem('history',JSON.stringify(history));
  cid.value='';caccount.value='';cpass.value='';ctypeAccount.value='';cgame.value='';ctable.value='';cpack.value='';cprice.value='';cpay.value='';cnotes.value='';cconfirm.checked=false;cimg.value='';
}

function showAdminSection(section){
  let sec=document.getElementById("adminSection"); sec.innerHTML="";
  if(section==='history'){ renderAdminHistory(); return; }
  if(section==='games') adminGames(sec);
  if(section==='tables') adminTables(sec);
  if(section==='packs') adminPacks(sec);
}

// ----------------- ADMIN HISTORY -----------------
function renderAdminHistory(){
  let sec=document.getElementById("adminSection"); sec.innerHTML='';
  if(history.length===0){sec.innerHTML='<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ø´Ø­Ù† Ø¨Ø¹Ø¯</p>'; return;}
  history.forEach(h=>{
    let d=document.createElement('div'); d.classList.add('section');
    d.textContent= h.type==='id'?`ID: ${h.id}`:`Account: ${h.account} | Password: ${h.pass} | Type: ${h.typeAcc}`;
    sec.appendChild(d);
  });
}

// ----------------- ADMIN CODING -----------------
function adminGames(container){
  for(let g in db){
    let div=document.createElement('div'); div.classList.add('section');
    div.innerHTML=`<b>${g}</b><div class='rowBtn'><button onclick="editGame('${g}')">âœï¸</button><button onclick="deleteGame('${g}')">ğŸ—‘ï¸</button></div>`;
    container.appendChild(div);
  }
  let addBtn=document.createElement('button'); addBtn.textContent="â• Ø¥Ø¶Ø§ÙØ© Ù„Ø¹Ø¨Ø©"; addBtn.classList.add('success');
  addBtn.onclick=()=>{let name=prompt("Ø§Ø³Ù… Ø§Ù„Ù„Ø¹Ø¨Ø©"); if(name){db[name]={}; localStorage.setItem('db',JSON.stringify(db)); showAdminSection('games');}};
  container.appendChild(addBtn);
}
function editGame(g){let n=prompt("Ø§Ø³Ù… Ø§Ù„Ù„Ø¹Ø¨Ø©",g); if(n){db[n]=db[g]; if(n!==g) delete db[g]; localStorage.setItem('db',JSON.stringify(db)); showAdminSection('games');}}
function deleteGame(g){if(confirm("Ø³ÙŠØªÙ… Ø­Ø°Ù Ø§Ù„Ù„Ø¹Ø¨Ø© ÙˆØ¬Ù…ÙŠØ¹ Ø¬Ø¯Ø§ÙˆÙ„Ù‡Ø§ ÙˆØ¨Ø§Ù‚Ø§ØªÙ‡Ø§ØŸ")){delete db[g]; localStorage.setItem('db',JSON.stringify(db)); showAdminSection('games');}}

// TABLES
function adminTables(container){
  let gameSelect=document.createElement('select'); for(let g in db){let opt=document.createElement('option'); opt.value=g; opt.textContent=g; gameSelect.appendChild(opt);}
  container.appendChild(gameSelect);
  let tableInput=document.createElement('input'); tableInput.placeholder="Ø§Ø³Ù… Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯"; container.appendChild(tableInput);
  let addBtn=document.createElement('button'); addBtn.textContent="â• Ø¥Ø¶Ø§ÙØ© Ø¬Ø¯ÙˆÙ„"; addBtn.classList.add('success'); container.appendChild(addBtn);
  let grid=document.createElement('div'); container.appendChild(grid);
  function renderTables(){ grid.innerHTML=''; let g=gameSelect.value; for(let t in db[g]){ let div=document.createElement('div'); div.classList.add('section'); div.innerHTML=`<b>${t}</b><div class='rowBtn'><button onclick="editTable('${g}','${t}')">âœï¸</button><button onclick="deleteTable('${g}','${t}')">ğŸ—‘ï¸</button></div>`; grid.appendChild(div);} }
  gameSelect.onchange=renderTables; renderTables();
  addBtn.onclick=()=>{let g=gameSelect.value; let t=tableInput.value; if(!t){alert('Ø§ÙƒØªØ¨ Ø§Ø³Ù… Ø§Ù„Ø¬Ø¯ÙˆÙ„'); return;} db[g][t]=[]; localStorage.setItem('db',JSON.stringify(db)); tableInput.value=''; renderTables();}
}
function editTable(g,t){let n=prompt("Ø§Ø³Ù… Ø§Ù„Ø¬Ø¯ÙˆÙ„",t); if(n){db[g][n]=db[g][t]; if(n!==t) delete db[g][t]; localStorage.setItem('db',JSON.stringify(db)); showAdminSection('tables');}}
function deleteTable(g,t){if(confirm('Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨Ø§Ù‚Ø§Øª ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø¬Ø¯ÙˆÙ„ØŸ')){delete db[g][t]; localStorage.setItem('db',JSON.stringify(db)); showAdminSection('tables');}}

// PACKS
function adminPacks(container){
  let gameSelect=document.createElement('select'); for(let g in db){let opt=document.createElement('option'); opt.value=g; opt.textContent=g; gameSelect.appendChild(opt);}
  container.appendChild(gameSelect);
  let tableSelect=document.createElement('select'); container.appendChild(tableSelect);
  let nameInput=document.createElement('input'); nameInput.placeholder="Ø§Ø³Ù… Ø§Ù„Ø¨Ø§Ù‚Ø©"; container.appendChild(nameInput);
  let priceInput=document.createElement('input'); priceInput.placeholder="Ø§Ù„Ø³Ø¹Ø±"; container.appendChild(priceInput);
  let addBtn=document.createElement('button'); addBtn.textContent="â• Ø¥Ø¶Ø§ÙØ© Ø¨Ø§Ù‚Ø©"; addBtn.classList.add('success'); container.appendChild(addBtn);
  let grid=document.createElement('div'); container.appendChild(grid);
  function renderPacks(){ grid.innerHTML=''; let g=gameSelect.value; let t=tableSelect.value; db[g][t].forEach((p,i)=>{ let div=document.createElement('div'); div.classList.add('section'); div.innerHTML=`${p.name} - ${p.price}<div class='rowBtn'><button onclick="editPack('${g}','${t}',${i})">âœï¸</button><button onclick="deletePack('${g}','${t}',${i})">ğŸ—‘ï¸</button></div>`; grid.appendChild(div); });}
  gameSelect.onchange=()=>{ tableSelect.innerHTML=''; let g=gameSelect.value; for(let t in db[g]){ let opt=document.createElement('option'); opt.value=t; opt.textContent=t; tableSelect.appendChild(opt); } renderPacks();}
  tableSelect.onchange=renderPacks;
  addBtn.onclick=()=>{ let g=gameSelect.value; let t=tableSelect.value; let n=nameInput.value; let pr=priceInput.value; if(!n||!pr){alert('Ø§ÙƒÙ…Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª'); return;} db[g][t].push({name:n,price:pr}); localStorage.setItem('db',JSON.stringify(db)); nameInput.value=''; priceInput.value=''; renderPacks();}
}
function editPack(g,t,i){let n=prompt('Ø§Ø³Ù… Ø§Ù„Ø¨Ø§Ù‚Ø©',db[g][t][i].name); let pr=prompt('Ø§Ù„Ø³Ø¹Ø±',db[g][t][i].price); if(n&&pr){db[g][t][i]={name:n,price:pr}; localStorage.setItem('db',JSON.stringify(db)); showAdminSection('packs');}}
function deletePack(g,t,i){db[g][t].splice(i,1); localStorage.setItem('db',JSON.stringify(db)); showAdminSection('packs');}
</script>
</body>
</html>
